---
import { getImage } from 'astro:assets'
import resolveConfig from 'tailwindcss/resolveConfig'
import tailwindConfig from '@root/tailwind.config'
import '@styles/global.css'

const { cover, title, address, position, keywords, description } = Astro.props
const image = await getImage({ src: cover, format: 'webp' })
const imageUrl = new URL(image.src, Astro.site)
const { theme } = resolveConfig(tailwindConfig)
const { colors } = theme

const page = {
  title: 'Maison Quiroga',
  author: 'redtech',
  copyright: '2024, redtech',
  themeColor: colors.secondary,
  colorScheme: 'only light'
}

const meta = {
  url: Astro.url,
  title,
  keywords: keywords.join(', '),
  description,
  image: imageUrl,
  card: 'summary',
  type: 'website',
  site: '', // Twitter/X username
  place: address,
  region: 'CL',
  position
}
---

<head>
  <link rel='icon' href='/favicon.ico' sizes='32x32' />
  <link rel='icon' href='/icon.svg' type='image/svg+xml' />
  <meta charset='utf-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />

  <!--  Page -->
  <title>{page.title}</title>
  <meta name='dc.title' content={page.title} />
  <meta name='author' content={page.author} />
  <meta name='copyright' content={page.copyright} />
  <meta name='theme-color' content={page.themeColor} />
  <meta name='color-scheme' content={page.colorScheme} />

  <!-- Meta -->
  <link rel='canonical' href={meta.url} />
  <meta name='title' content={meta.title} />
  <meta name='keywords' content={meta.keywords} />
  <meta name='description' content={meta.description} />

  <!-- Open Graph -->
  <meta property='og:image' content={meta.image} />
  <meta property='og:url' content={meta.url} />
  <meta property='og:type' content={meta.type} />
  <meta property='og:title' content={meta.title} />
  <meta property='og:description' content={meta.description} />

  <!-- Twitter -->
  <meta name='twitter:image' content={meta.image} />
  <meta name='twitter:card' content={meta.card} />
  <meta name='twitter:site' content={meta.site} />
  <meta name='twitter:title' content={meta.title} />
  <meta name='twitter:description' content={meta.description} />

  <!-- Geo -->
  <meta name='geo.placename' content={meta.place} />
  <meta name='geo.region' content={meta.region} />
  <meta name='geo.position' content={meta.position} />
</head>
